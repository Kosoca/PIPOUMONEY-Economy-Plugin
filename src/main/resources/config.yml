# ============================================================
# PipouMoney - Main Configuration
# ============================================================
# Controls economy behavior, storage, commands, audit
# and security (anti-abuse) for the PipouMoney plugin.
#
# Changes apply after: /money admin reload
# ============================================================


# ============================================================
# Database connection
# ============================================================
database:
  # Storage type:
  #  - sqlite (recommended for small/medium servers)
  #  - mysql  (recommended for large / multi-server setups)
  type: sqlite

  sqlite:
    file: "pipoumoney.db"

  mysql:
    host: "localhost"
    port: 3306
    database: "pipoumoney"
    username: "pipoumoney"
    password: "CHANGE_ME"

    pool:
      max-size: 10
      min-idle: 2
      idle-timeout-ms: 30000
      max-lifetime-ms: 1800000


# ============================================================
# Number formatting & currency
# ============================================================
format:
  decimals: 2
  locale: "en_US"

currency:
  symbol: "$"
  singular: "dollar"
  plural: "dollars"
  format: "{symbol}{amount}"


# ============================================================
# Autosave & database flushing
# ============================================================
autosave:
  enabled: true
  interval-minutes: 5

flush:
  dirty-threshold: 50


# ============================================================
# Player listeners
# ============================================================
listeners:
  update-name-on-join: true
  flush-on-quit: true


# ============================================================
# Pay system (/pay)
# ============================================================
pay:
  enabled: true
  min: 1.0
  allow-pay-self: false
  cooldown-seconds: 3

  confirm-above: 500.0
  confirm-timeout-seconds: 20
  request-timeout-seconds: 60

  tax-percent: 0.0
  tax-mode: "sink"
  treasury-uuid: "00000000-0000-0000-0000-000000000000"


# ============================================================
# Balances listing (/money admin balances)
# ============================================================
balances:
  only-online: false
  min: 0.0
  per-page: 10
  show-uuid: false
  sort: "BAL_DESC"


# ============================================================
# Top command (/baltop, /money admin top)
# ============================================================
top:
  default: 10
  max: 50


# ============================================================
# Top cache (performance)
# ============================================================
top-cache:
  enabled: true
  size: 50
  refresh-minutes: 5


# ============================================================
# Audit & transaction history
# ============================================================
audit:
  enabled: true
  per-page: 10

  purge-on-start:
    enabled: false
    older-than-days: 90


# ============================================================
# Player history limits
# ============================================================
player:
  history-days-limit: 30
  history-max-results: 200


# ============================================================
# Anti-abuse / fraud detection
# ============================================================
anti-abuse:
  enabled: true
  alert-admins: true
  block-on-trigger: false
  auto-flag: true

  max-transactions-per-window: 10
  window-seconds: 60
  window-max-amount: 5000.0
  daily-max-amount: 25000.0
  single-tx-max-amount: 10000.0


# ============================================================
# Health command
# ============================================================
health:
  tps-sample: 0
